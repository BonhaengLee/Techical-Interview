# single page app이 무엇인지 설명하고 SEO-friendly하게 만드는 방법을 설명하세요 #

웹 개발자는 요즘 웹 사이트가 아닌 웹 앱으로 제작한 제품을 언급합니다.  
엄격한 차이는 없지만, 웹 앱은 대화형, 동적인 경향이 있어 사용자가 작업을 수행하고 작업에 대한 응답을 받을 수 있습니다.  

전통적으로, 브라우저는 서버에서 HTML을 받아 렌더링합니다.  
사용자가 다른 URL로 이동하면, 전체 페이지 새로고침이 필요하며 서버는 새 페이지에 대해 새 HTML을 보냅니다. 이를 **server-side rendering**이라 합니다.

그러나 현대 SPA에서는 대신 **client-side rendering**이 사용됩니다.  
브라우저는 전체 애플리케이션에 필요한 `스크립트(프레임워크, 라이브러리, 앱 코드) 및 스타일시트`와 함께 서버의 `초기 페이지를 로드`합니다.  

사용자가 다른 페이지로 이동하면 페이지 새로고침이 발생하지 않습니다.  `페이지 URL은 HTML5 History API를 통해 업데이트`됩니다.  

일반적으로 JSON 형식의 새 페이지에 `필요한 새 데이터는 브라우저에서 AJAX 요청`을 통해 서버로 전송됩니다.  
SPA는 초기 페이지 로딩에서 `미리 다운로드된 JS를 통해 페이지를 동적으로 업데이트`합니다. 이 모델은 네이티브 모바일 앱의 동작 방식과 유사합니다.

## 장점 ##

- 전체 페이지 새로고침으로 인해 **페이지 탐색 사이에 하얀 화면이 보이지 않아 앱이 더 반응적**으로 느껴지게 됩니다.
- **동일한 애셋**을 페이지 **로드마다 다시 다운로드할 필요가 없으므로** 서버에 대한 HTTP 요청이 줄어듭니다.
- **클라이언트와 서버 사이의 고려해야 할 부분을 명확하게 구분**합니다. 서버 코드를 수정하지 않고도 다양한 플랫폼(예: 모바일, 챗봇, 스마트 워치)에 맞는 새로운 클라이언트를 쉽게 구축할 수 있습니다. 또한 API 규약이 깨지지 않는 한도 내에서 클라이언트와 서버에서 `기술 스택을 독립적으로 수정`할 수 있습니다.

## 단점 ##

- 여러 페이지에 필요한 **프레임워크, 앱 코드, 에셋 로드로 인해 초기 페이지 로드가 무거워집니다.**
- 모든 요청을 단일 진입접으로 라우트하고 클라이언트 측 라우팅이 그 한 곳에서 인계받을 수 있도록 **서버를 구성하는 추가 단계가 필요**합니다.
- SPA는 콘텐츠를 렌더링하기 위해 JavaScript에 의존하지만 `모든 검색 엔진이 크롤링 중에 JavaScript를 실행하지는 않으며 페이지에 빈 콘텐츠가 표시될 수 있습니다.` 이로 인해 의도치 않게 앱의 검색 엔진 최적화(SEO)가 어려워집니다.  
그러나 대부분의 경우 앱을 제작할 때 검색 엔진에서 모든 콘텐츠 색인할 필요는 없으므로 SEO가 가장 중요한 요소는 아닙니다.  

이를 극복하기 위해, 앱을 `서버 측 렌더링하거나 Prerender`와 같은 서비스를 사용하여 "**브라우저에서 JavaScript를 렌더링하고, 정적 HTML을 저장한 다음, 크롤러에게 반환**합니다".

## [React에서 CSR 방식으로 SEO 최적화하기](https://mygumi.tistory.com/385) ##

<blockquote>
각 라우터에 해당하는 index.html 파일을 만들어주면 된다.  
  
React 를 기준으로 react-helmet 과 react-snap 를 함께 사용할 수 있다.  
react-helmet 을 통해 메타 태그를 셋팅하고, react-snap 을 통해 index.html 을 생성한다.  
동적 라우터에 대한 처리는 prerender-spa-plugin 을 활용한다.

... 

매번 동적 페이지가 추가될때마다 그에 맞는 HTML 파일을 생성하는 방식이다.

이러한 큰 틀에서 효율적인 방식을 점차 적용해나가면 되나 결국은 SSR 방식에 비해서는 다소 매끄럽지 못하다.

많은 동적 페이지를 요구하고 SEO 최적화가 필요한 서비스라면 CSR 방식은 다소 무리라고 판단된다.



출처: https://mygumi.tistory.com/385 [마이구미의 HelloWorld]
</blockquote>

### 참고 ###

[Grab Front End Guide](https://github.com/grab/front-end-guide)
